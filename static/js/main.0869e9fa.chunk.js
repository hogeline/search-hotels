(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){"use strict";(function(e){var n=a(22),r=a(170),l=a.n(r);t.a=Object(n.combineReducers)({place:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var t=l.a.parse(e.location.search).place;return t&&t.length>0?t:null}()||"\u6771\u4eac\u30bf\u30ef\u30fc",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHANGE_PLACE":return a.place;default:return t}},geocodeResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:"",location:{lat:35.6585805,lng:139.7454329}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GEOCODE_FETCHED":return{address:t.address,location:t.location};case"CHANGE_ERROR_MESSAGE":return{address:t.message,location:{lat:0,lng:0}};default:return e}},hotels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_HOTELS":return t.hotels;default:return e}},loadHotels:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_HOTELS":return t.isLoading;default:return e}},sortKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"price",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SORT_KEY":return t.sortKey;default:return e}}})}).call(this,a(35))},172:function(e,t,a){e.exports=a(401)},401:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),o=a.n(l),c=a(18),i=a(22),s=a(160),u=a(161),m=a(404),d=a(403),h=a(406),p=a(405),E=a(62),f=a(63),v=a(68),g=a(64),y=a(69),b=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={hasError:!1},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}]),t}(r.a.Component),O=a(65),S=a.n(O);a(74).config();var w=a(162),N=a.n(w),C="".concat("https://app.rakuten.co.jp/services/api/Travel/","/SimpleHotelSearch/20170426"),A={simpleHotelSearch:function(e){return S.a.get(C,{params:e})}};a(74).config();var j=function(e){return function(t){return t({type:"CHANGE_ERROR_MESSAGE",message:e})}},k=function(e){return function(t){return t({type:"LOADING_HOTELS",isLoading:e})}},H=function(){return function(e,t){var a;e(k(!0)),(a=t().place,S.a.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{key:"AIzaSyDa1WqUW_b2muL31FtrjmDlR4JeuEMvm-s",address:a}}).then(function(e){var t=e.data,a=t.status,n=t.results[0];return"undefined"===typeof n?{status:a}:{status:a,address:n.formatted_address,location:n.geometry.location}})).then(function(t){var a=t.status,n=t.address,r=t.location;switch(a){case"OK":return e({type:"GEOCODE_FETCHED",address:n,location:r}),function(e){var t={applicationId:"1011284255554010410",datumType:1,latitude:e.lat,longitude:e.lng};return A.simpleHotelSearch(t).then(function(t){return t.data.hotels.map(function(t){var a=t.hotel[0].hotelBasicInfo,n=N.a.getDistance({latitude:e.lat,longitude:e.lng},{latitude:a.latitude,longitude:a.longitude});return{id:a.hotelNo,name:a.hotelName,url:a.hotelInformationUrl,thumbUrl:a.hotelThumbnailUrl,price:a.hotelMinCharge,reviewAverage:a.reviewAverage,reviewCount:a.reviewCount,distance:n}})})}(r);case"ZERO_RESULTS":e(j("\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"));break;default:e(j("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"))}return[]}).then(function(t){e(k(!1)),e(function(e){return function(t){return t({type:"CHANGE_HOTELS",hotels:e})}}(t))}).catch(function(){e(j("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"))})}},_=Object(c.b)(function(e){return{place:e.place}},{setPlace:function(e){return function(t){return t({type:"CHANGE_PLACE",place:e})}},startSearch:H})(function(e){return r.a.createElement("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),e.history.push("?place=".concat(e.place)),e.startSearch(e.place)}},r.a.createElement("input",{className:"SearchForm-input",type:"text",size:"30",value:e.place,onChange:function(t){t.preventDefault(),e.setPlace(t.target.value)}}),r.a.createElement("input",{className:"SearchForm-submit",type:"submit",value:"\u691c\u7d22"}))}),R=function(e){var t=e.address,a=e.location;return r.a.createElement("ul",{className:"geocode-result"},r.a.createElement("li",null,"\u4f4f\u6240\uff1a",t),r.a.createElement("li",null,"\u7def\u5ea6\uff1a",a.lat),r.a.createElement("li",null,"\u7d4c\u5ea6\uff1a",a.lng))};R.defaultProps={address:""};var L=R,G=a(171),D=a(70);a(74).config();var K=Object(D.withGoogleMap)(function(e){var t=e.location,a=e.marker;return r.a.createElement(D.GoogleMap,{defaultZoom:12,defaultCenter:t,center:t},r.a.createElement(D.Marker,a))}),T=function(e){var t=e.location;return r.a.createElement(G.a,{params:{key:"AIzaSyDa1WqUW_b2muL31FtrjmDlR4JeuEMvm-s",libraries:"places,geometry"},render:function(e,a){return e?r.a.createElement("div",null,r.a.createElement(K,{containerElement:r.a.createElement("div",null),mapElement:r.a.createElement("div",{className:"map"}),location:t,marker:{position:t}}),a||"Google Maps is loaded !"):r.a.createElement("div",null,"Network Error"===a?r.a.createElement("p",null,a):r.a.createElement("p",null,"isLoading..."))}})},M=a(165),P=a.n(M),I=function(e){var t=e.hotel;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:t.thumbUrl,alt:t.name})),r.a.createElement("td",null,r.a.createElement("a",{href:t.url},t.name)),r.a.createElement("td",null,t.price?"".concat(t.price,"\u5186"):"\u7a7a\u5ba4\u306a\u3057"),r.a.createElement("td",null,t.reviewAverage),r.a.createElement("td",null,t.reviewCount),r.a.createElement("td",null,t.distance))},F=Object(c.b)(function(e,t){return{isSelected:t.sortKey===e.sortKey}},{setSortKey:function(e){return function(t){return t({type:"CHANGE_SORT_KEY",sortKey:e})}}})(function(e){return r.a.createElement("th",{className:"HotelsClickableTh",onClick:function(){return e.setSortKey(e.sortKey)}},e.label,e.isSelected?"\u25b2":"")}),U=a(166),W=a.n(U),x=function(e){return e.isLoading?r.a.createElement(W.a,{type:"spokes",color:"#0000ff"}):null},B=function(e){var t=e.hotels,a=e.isLoading;return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u753b\u50cf"),r.a.createElement("th",null,"\u30db\u30c6\u30eb\u540d"),r.a.createElement(F,{label:"\u5024\u6bb5",sortKey:"price"}),r.a.createElement(F,{label:"\u30ec\u30d3\u30e5\u30fc",sortKey:"reviewAverage"}),r.a.createElement(F,{label:"\u30ec\u30d3\u30e5\u30fc\u4ef6\u6570",sortKey:"reviewCount"}),r.a.createElement(F,{label:"\u8ddd\u96e2",sortKey:"distance"})),r.a.createElement(x,{isLoading:a}),t.map(function(e){return r.a.createElement(I,{key:e.id,hotel:e})})))};B.defaultProps={hotels:[]};var J=Object(c.b)(function(e){return{hotels:(t=e.hotels,a=e.sortKey,P.a.sortBy(t,function(e){return e[a]})),isLoading:e.loadHotels};var t,a})(B),z=function(e){function t(){return Object(E.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(H())}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchPage"},r.a.createElement("h1",{className:"SearchPage-title"},"\u30db\u30c6\u30eb\u691c\u7d22"),r.a.createElement(_,{history:this.props.history}),r.a.createElement("div",{className:"SearchPage-result-left"},r.a.createElement(b,null,r.a.createElement(T,{location:this.props.geocodeResult.location})),r.a.createElement("div",{className:"SearchPage-result-right"},r.a.createElement(L,{address:this.props.geocodeResult.address,location:this.props.geocodeResult.location}),r.a.createElement("h2",null,"\u30db\u30c6\u30eb\u691c\u7d22\u7d50\u679c"),r.a.createElement(J,null))))}}]),t}(n.Component),q=Object(c.b)(function(e){return{geocodeResult:e.geocodeResult}})(z),Y=function(){return r.a.createElement("div",{className:"about"},r.a.createElement("h1",{className:"App-title"},"\u3053\u306e\u30b5\u30a4\u30c8\u306b\u3064\u3044\u3066"))},Z=function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("ul",{className:"App-left-navi"},r.a.createElement("li",null,r.a.createElement(d.a,{to:"/search-hotels"},"\u30db\u30c6\u30eb\u691c\u7d22")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/search-hotels/about"},"About"))),r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/search-hotels",component:q}),r.a.createElement(p.a,{exact:!0,path:"/search-hotels/about",component:Y}))))},$=a(169);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=Object(i.createStore)($.a,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(s.a)));o.a.render(r.a.createElement(c.a,{store:Q},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[172,2,1]]]);
//# sourceMappingURL=main.0869e9fa.chunk.js.map